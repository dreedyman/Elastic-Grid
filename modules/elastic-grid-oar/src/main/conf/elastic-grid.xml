<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!--

    Elastic Grid
    Copyright (C) 2008-2009 Elastic Grid, LLC.

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

-->
<!DOCTYPE opstring SYSTEM "java://org/rioproject/dtd/rio_opstring.dtd">

<opstring>

    <OperationalString Name="Elastic Grid">

        <Codebase>$[org.rioproject.codeserver]</Codebase>
        <Groups>
		<Group>rio</Group>
        </Groups>
        <Organization>Kalixia, SARL.</Organization>

        <Logging>
            <Logger Name="com.elasticgrid" Level="FINEST">
                <Handler ClassName="java.util.logging.ConsoleHandler" Level="FINEST"/>
            </Logger>
            <Logger Name="org.rioproject.event" Level="FINEST">
                <Handler ClassName="java.util.logging.ConsoleHandler" Level="FINEST"/>
            </Logger>
        </Logging>               

        <ServiceBean Name="Amazon EC2 Provision Monitor">

            <Interfaces>
                <Interface>com.elasticgrid.monitor.EC2ProvisionMonitor</Interface>
                <Resources>
                    <JAR>elastic-grid/lib-dl/amazon-ec2-provisioner-1.0-SNAPSHOT-dl.jar</JAR>
                    <JAR>elastic-grid/lib/commons-logging-1.0.4.jar</JAR>
                    <JAR>rio-dl.jar</JAR>
                </Resources>
            </Interfaces>

            <ImplementationClass>com.elasticgrid.monitor.EC2ProvisionMonitorImpl
                <Resources>
                    <JAR>elastic-grid/lib/amazon-ec2-provisioner-1.0-SNAPSHOT-impl.jar</JAR>
		            <JAR>elastic-grid/lib-dl/amazon-ec2-provisioner-1.0-SNAPSHOT-dl.jar</JAR>
                    <JAR>elastic-grid/lib/jaxb-impl-2.0.5.jar</JAR>
                    <JAR>elastic-grid/lib/jaxb-api-2.0.jar</JAR>
                    <JAR>elastic-grid/lib/activation-1.1.jar</JAR>
                    <JAR>elastic-grid/lib/stax-api-1.0.1.jar</JAR>
                    <JAR>elastic-grid/lib/commons-httpclient-3.1.jar</JAR>
                    <JAR>elastic-grid/lib/commons-logging-1.0.4.jar</JAR>
                </Resources>
            </ImplementationClass>

            <Configuration>
                <Component Name="com.elasticgrid.amazon.ec2">
                    <Parameter Name="awsAccessKeyId" Value='"0ZFE2GWP55PY92GD0A02"'/>
                    <Parameter Name="awsSecretKey" Value='"Xj3hJngb3nJD5c3ti/O1MqW/A2v5gnd9ST6rns4h"'/>
                    <Parameter Name="amazonImageID" Value='"123456"'/>
                    <Parameter Name="keyName" Value='"production"'/>
                    <Parameter Name="secured" Value="java.lang.Boolean.TRUE"/>
                    <Parameter Name="publicAddress" Value="java.lang.Boolean.TRUE"/>
                    <Parameter Name="secured" Value="java.lang.Boolean.FALSE"/>
                    <!--<Parameter Name="securityGroups" Value='java.util.Arrays.asList("default", "default2")'/>-->
                </Component>
                <Component Name="org.rioproject">
                    <Parameter Name="defaultExporter" Value="$org_jini_rio_defaultExporter"/>
                </Component>
            </Configuration>

            <ServiceLevelAgreements>
                <SystemRequirements>
                    <Utilization ID="System" High=".7"/>
                    <Utilization ID="CPU" High="1"/>
                </SystemRequirements>
            </ServiceLevelAgreements>

            <Maintain>1</Maintain>
            <MaxPerMachine>1</MaxPerMachine>
            <Comment>Provisioning to Amazon EC2.</Comment>
        </ServiceBean>

    </OperationalString>

</opstring>
